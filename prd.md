# Product Requirements Document (PRD): ChainQuery AI

**Version:** 1.0
**Status:** Draft (MVP)
**Timeline:** 5 Days (Capstone Submission)
**Owner:** Excellus

## 1. Executive Summary

**Product Name:** ChainQuery AI
**Tagline:** "Don't memorize schemas. Just ask. The Natural Language Interface for Blockchain Data."
**Objective:** To build an AI-powered developer tool that translates natural language questions into production-ready **DuneSQL** (Trino) queries for the **Solana** blockchain.
**Primary User:** Web3 Developers, Data Analysts, and "Crypto-Curious" Engineers who find Dune Analytics difficult to use.

---

## 2. Problem Statement

**The Pain:** Accessing blockchain data is hard. Platforms like Dune Analytics require users to know complex SQL dialects (Trino) and obscure table names (e.g., `solana.core.fact_transactions` vs. `solana.transactions`).
**The Solution:** An AI bridge that understands the user's intent ("Show me Solana volume") and maps it to the correct database schema, generating optimized SQL code instantly.

---

## 3. Technical Specifications (The Stack)

This stack leverages your existing strengths and supports "Vibe Coding" (fast UI iteration).

* **Frontend:**
  * **Framework:** React (Vite).
  * **UI Library:** `shadcn/ui` (Buttons, Cards, Sheet for history) + Tailwind CSS.
  * **Editor:** `@monaco-editor/react` (VS Code-like experience for the SQL output).
  * **Icons:** `lucide-react`.

* **Backend:**
  * **Framework:** FastAPI (Python).
  * **AI Engine:** OpenAI (GPT-4o) or Anthropic (Claude 3.5 Sonnet) via API.
  * **Validation:** Pydantic models.

* **Database:**
  * **Type:** PostgreSQL (Supabase or local Docker).
  * **Purpose:** Store user "Query History" and "Saved Snippets."

* **Docs:**
  * **Standard:** OpenAPI (Swagger UI) auto-generated by FastAPI.

---

## 4. MVP Feature Requirements (Must-Haves)

### Feature 1: The "Dune Expert" Generator (Core)

* **Description:** The primary interface where users type a question and get SQL.
* **Inputs:**
  * Chain Selection (Hardcoded to "Solana" for MVP).
  * User Prompt (Text Area).

* **System Logic:**
  * The Backend receives the text.
  * It injects a **System Prompt** containing the "Golden Schema" (key Solana tables).
  * It returns the generated SQL + a brief explanation.

* **Acceptance Criteria:**
  * The generated SQL must use `solana.core` tables.
  * The generated SQL must be syntactically valid Trino SQL.

### Feature 2: Syntax-Highlighted SQL Editor

* **Description:** A read-only code block that looks like a professional IDE.
* **Functionality:**
  * Syntax highlighting for SQL.
  * "Copy to Clipboard" button (with toast notification).
  * "Explain" button (Pivot feature: AI explains line-by-line what the code does).

### Feature 3: Query History

* **Description:** A sidebar showing the last 10 queries the user generated.
* **Storage:** Persisted in PostgreSQL (or LocalStorage if running out of time).

---

## 5. Data Schema Strategy (The "Data Engineering" Flex)

*To prove your Data Engineering skills, the AI must know the **Real** schema. You will hardcode these definitions into the System Prompt.*

**The "Golden Tables" (Solana Scope):**

1. **Transactions:** `solana.core.fact_transactions` (for volume, success rates).
2. **Token Transfers:** `solana.core.ez_token_transfers_hourly` (for moving money).
3. **NFT Mints:** `solana.nft.fact_nft_mints` (for NFT data).
4. **Price Data:** `prices.usd` (for converting SOL to USD).

---

## 6. User Flow

1. **Landing:** User sees a clean, dark-mode dashboard. "Ask ChainQuery anything about Solana data."
2. **Input:** User types: *"Show me the top 10 wallets sending USDC in the last 24 hours."*
3. **Action:** User hits "Generate SQL."
4. **Loading:** A skeleton loader or "Thinking..." animation appears.
5. **Result:** The Editor populates with code:
```sql
SELECT
  sender,
  SUM(amount) as total_usdc
FROM solana.core.fact_transfers
WHERE mint = 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v' -- USDC Contract
AND block_timestamp > now() - interval '1' day
GROUP BY 1
ORDER BY 2 DESC
LIMIT 10
```
6. **Usage:** User clicks "Copy" and is prompted to "Paste this into Dune.com."

---

## 7. 5-Day Development Roadmap

| Day | Goal | Key Tasks |
| --- | --- | --- |
| **Day 1** | **Backend Core** | Setup FastAPI, install OpenAI SDK. Build the `POST /generate` endpoint. **Crucial:** Engineer the System Prompt to include the "Golden Tables." Test with Curl. |
| **Day 2** | **Frontend Vibe** | Setup React + Vite + Shadcn. Build the layout (Sidebar, Main Area). Implement the `Monaco Editor` component. |
| **Day 3** | **Integration** | Connect React to FastAPI. Handle loading states. Add the "Copy" button. Add the "Chain Selector" (visual only, locked to Solana). |
| **Day 4** | **Polish & DB** | Setup PostgreSQL. Save every generated query to the DB. Create the "History" sidebar to fetch from DB. |
| **Day 5** | **Documentation** | Write the `README.md`. Record the Demo Video. Submit. |

---

## 8. Portfolio Narrative (How to sell this)

When you submit this, your "About" section should say:

> *"ChainQuery AI addresses the high barrier to entry in Web3 Data Engineering. By leveraging **RAG principles** (injecting schema context) and **FastAPI**, I built a tool that acts as a translator between natural language and **Trino SQL**, enabling developers to query the Solana blockchain without memorizing table definitions."*
